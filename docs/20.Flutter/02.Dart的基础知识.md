---
title: 02.Dart的基础知识 
date: 2021-08-28 
tags:
- Dart
- Flutter categories:
- Flutter
---

## 1 声明变量和常量

### 1.2 用`var`声明变量

``` dart 
void main() {
  var foo = 'string';
  var bar = 0;
  var arr = ['e1', 'e2'];
  print(foo);
  print(bar);
  print(arr);
``
> 输入为:
``` bash 
string
0
[e1, e2]
ga
```

<!-- more -->
:::warning 不要声明没有初始化值的变量，这样会造成这个变量可以是任意类型。

``` dart
void main() {
  var foo; 
  foo = 0;
  foo = "string";
  foo = [];
  print(foo);
}
```

> 输出结果为:

``` bash 
[]
```

:::

### 1.2 指定类型声明变量

``` dart
void main() {
  String str;
  int num;
  bool boo;
  var identifier = new Map();
}
```

### 1.3 `final`关键字的使用

`final`也是用于声明用的，但只能声明一次。且不能再被赋值.

``` dart
void main() {
  final foo = 1;
  foo = 2; // <-- 不能再次赋值了
  print(foo);
}
```

尽管用`final`只能声明一次， 但对于复合类型的的常来说，其子元素可以被修改操作而不会被禁止，只要复合类型不变就可以了。

``` dart
void main() {
  final bar = new Map();
  bar["index"] = 1;  // <-- 如果声明的是复合变量，则子元素的操作不会禁止
  bar["index"] = "I'm a string";  // <-- 可以对子元素任意操作
  print(bar);
}
```

### 1.4 声明常量

> 常量声明只能声明单一类型的值。

```dart
void main() {
  const num = 1;
  const str  = "hello world";
  const b = true;
}
```

## 2 内置数据类型和运算符

:::tip
`dart`一共提供了7种数据类型:

* num(int/double) 数值类型
* string 字符串类型
* bool 布尔类型
* List 列表类型
* Map 映射类型
* Symbol 标致类型
* Runes

:::

### 2.1 Number类型

``` dart
void main() {
  num foo = 1; // 声明一个数字，可以是整数或浮点数
  int bar = -1;  // 声明一个整数
  double baz = 0.1; // 声明一个浮点数
  print(foo.runtimeType); // 打印 int 类型
  foo = 0.1;
  print(foo.runtimeType); //打印double 类型 说明声明num是可以在 int和double之间转换的
}
```

#### 2.1.1 Number类型的运算

运算符有: `+`, `-` , `*`, `/`, `~/`, `%`  
其它不论，而`~/`是`dart`特有的运算符--取整

``` dart
void main() {
  num foo = 1; // 声明一个数字，可以是整数或浮点数
  int bar = -1;  // 声明一个整数
  double baz = 0.1; // 声明一个浮点数
  print(foo.runtimeType); // 打印 int 类型
  foo = 0.1;
  print(foo.runtimeType); // 打死 double 类型 说明声明num是可以在 int和double之间转换的
}
```

#### 2.1.2 Number类型的一些常用内置方法

``` dart 
void main() {
  num foo = -2.1;
  print(foo.round()); // 四舍五入
  print(foo.ceil()); // 进一取整
  print(foo.floor()); //退一取整
  print(foo.abs()); //绝对值
}
```

### 2.2 字符串类型

#### 2.2.1 字符串的声明

``` dart
  String foo = "hello world"; // <-- 双引号 单行声明
  foo = 'hello world'; // <-- 单引号
  foo = '''
  line1
  line2
  ...
  '''; // <-- 多行, 类似于格式化字符串的意思
```

#### 2.2.2 字符串的运算符

``` dart
String foo = "hello world";
print(foo + "!"); // <-- 拼接
print(foo * 2); // <-- 拼接自己2次
print(foo == foo); // <-- 字符串比较
print(foo[0]); // <-- 取下标0的字符
```

> 输出

``` bash 
hello world!
hello worldhello world
true
h
```

#### 2.2.3 字符串插值表达式

``` dart 
String dart = 'dart';
print("hello, ${dart}"); // <-- 打开 hello,dart
```

#### 2.2.4 字符串常用属性

``` dart
String dart = 'dart';
print(dart.length); // 长度: 4
print(dart.isEmpty); // 是否为空: false
print(dart.isNotEmpty); // 是否不为空: true
```

#### 2.2.5 常用方法

``` dart
String dart = ' dart ';
print(dart.contains('dart')); // 是否包含 dart
print(dart.toLowerCase()); // 转化为小写
print(dart.trim()); // 去空格
print(dart.trimLeft()); //  去左空格
print(dart.trimRight()); // 去右空格
print(dart.indexOf('d')); // d 所在的位置
print(dart.lastIndexOf('a')); // a所在的倒数位置
print(dart.split('r')); // 从r中拆分为列表
print(dart.endsWith(' ')); // 以最后一个字符是空格
print(dart.startsWith(' ')); //以最前一个字符是空格

```

### 2.3 布尔值

``` dart
bool isOk = true;
print(isOk);
```

### 2.4 List数组

#### 2.4.1 声明

``` dart
var foo = [1, 2, 3, "hello world"];
print(foo[0]); // <-- 打印1
foo[0] = "hello world";
print(foo[0]); // <-- 打印 hello world
var bar = const[1, 2, 3]; // <-- 声明不可变更list
var [0] = 1; // <-- 错误： 不可更改
var baz = <String>[]; // 泛型指定元素的类型
```

#### 2.4.2 常用属性和常用方法

``` dart
var foo = [1, 2, 3, "hello world"];
print(foo[0]); // <-- 打印1
foo[0] = "hello world";
print(foo[0]); // <-- 打印 hello world
var bar = const[1, 2, 3]; // <-- 声明不可变更list
var [0] = 1; // <-- 错误： 不可更改
```

### 2.5 Map类型

#### 2.5.1 声明

``` dart
var foo = {"foo": 1, "bar": "hello world", "baz": true}; // <-- 声明map
print(foo); // <-- {foo: 1, bar: hello world, baz: true}
foo["newItem"] = "hello";
print(foo); // <-- {foo: 1, bar: hello world, baz: true, newItem: hello}
var bar = const {"foo": 1}; // <-- 声明不可变的map 声明后变量不可以变更
bar["foo"] = 2; // 错误，不能修改
var baz = <num, String>{}; // <-- 限定类型
baz[1] = "str";

```

#### 2.5.2 常用属性和方法

``` dart
var foo = {"foo": 1, "bar": "hello world", "baz": true};
print(foo.length); // <-- 长度属性 3
print(foo.keys); // <-- 所有键名列表  {foo, bar, baz}
print(foo.values); // <-- 所有键值列表 {1, hello world, true}

print(foo.containsKey("foo")); // <-- 是否包含foo键名 true
print(foo.containsValue(1)); // <-- 是否包含1键值 true

foo.forEach((k, v) {
print("key = ${k}, value = ${v}"); // <-- 打印键名和键值
});
```

### 2.6 dynamic 动态类型

#### 2.6.1 声明

``` dart
var foo; // <-- var 方式声明且不初始化值，则默认类型为 dinamic 动态类型
foo = 1;     // 可以再次赋值为 int
foo = "str";// 可以再次赋值为 string
foo = true;// 可以再次赋值为 bool
foo = [];  // 数组等等
print(foo);

dynamic bar; // <-- 用 dynimac 关键字声明
bar = 1;
bar = "str";
bar = true;
print(bar);
```

## 3 运算符

### 3.1 加减乘除g运行符
| 操作符 | 说明 | 示例 |
| --- | --- | --- |
| `+` |   加  | `print(1 + 1)`, 输出: 2  | 
| `-` |   减  | `print(2 - 1)`, 输出: 1  | 
| `*` |   乘  | `print(2 * 1)`, 输出: 2 |
| `/` |   除  | `print(2 / 2)`, 输出: 1 |
| `~/` |  除后取整  | `print(3 ~/ 2)`, 输出: 1 |
| `%` |  除余  | `print(5 % 2)`, 输出: 1 |

### 3.2 递增递减运算符
``` dart
var foo = 3;
print(foo++); // <-- 先执行再递增: 3
print(foo); //  <-- 结果：4
print(++foo); // <-- 先递增再执行: 5

print(foo--); // <-- 先递减再执行: 5
print(++foo); // <-- 先执行再递减: 5
```
### 3.3 关系运算符
| 操作符 | 说明 | 示例 |
| --- | --- | --- |
| `==` | 相等判断 | `print(true == true); `输出: true  |
| `!=` | 不等判断 | `print("foo" != "bar");` 输出: true |
| `>` | 大于 | `print( 1 > 2)`; 输出: false | 
| `<` | 小于 | `print( 1 < 2)`; 输出:  true | 
| `>=` | 大于或等于 | `print( 1 >= 2)`； 输出: false |
| `<=` | 小于或等于 | `print( 1 <= 2)`； 输出: true|

### 3.4 逻辑运算符
| 操作符 | 说明 | 示例 |
| --- | --- | --- |
| `!` | 非 |  `print(!false)`； 输出： true| 
| `&&` | 与 |  `print(true && true)`； 输出： true | 
| `||` | 或 |  `print(false|| false)`； 输出：false | 

### 3.5 赋值运算符

| 操作符 | 说明 | 示例 |
| --- | --- | --- |
| `=` | 赋值 | `var foo = 1;` |
| `??=`| 复合运算符, 由 `??`和`=`组成, 判定是否为空，空则赋值，不为空，则不赋值 |`var bar; bar ??= 1;` bar 没有初始化值，则赋值1,反之不处理 |
| `+=` | 加等 |  `int foo = 0; foo += 1;` | 
| `-=` | 减等 |  `int foo = 0; foo -= 1;` | 
| `*=` | 乘等 |  `int foo = 0; foo *= 2;` | 
| `/=` | 除等 |  `int foo = 4; foo /= 2;` | 
| `~/=` | 除取整等 |  `int foo = 5; foo ~/= 3;` | 
| `%=` | 取余整等 |  `int foo = 5; foo %= 3;` | 
