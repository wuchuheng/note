---
title: ssh基础用法
date: 2017-12-08
tags:
- SSH
---

## 1什么是SSH?
`SSH`全名是Secure Shell。是个基于安全`socket`方式的`shell`，通俗讲就是在不安全的网络中也能安全连接远程主机的`shell`的工具。它的
安全实现实现原理采用了非对称加密方式，即本地私钥加密远程公钥解密反之远程公钥加密本地私钥解密，从而确保中间报文被监听也解密不了，从而保证其安全性。

## 2ssh-key生成密钥
如果采用密钥登录，那么就要在本地生成这么对公钥和私钥出来，公钥给远程主机使用，私钥自己用。
### 2.1 直接生成
``` bash 
$ ssh-key  
```
:::tip 
运行上面的命令后，一路回车，就会在`~/.ssh`中生成一个`id_rsa`和`id_ras.pub`前者是私钥后者反之。
::
### 2.2 配置项
``` bash 
$ man ssh-keygen 
     ssh-keygen [-q] [-b bits] [-t dsa | ecdsa | ed25519 | rsa] [-N new_passphrase] [-C comment] [-f output_keyfile]
     ssh-keygen -c [-P passphrase] [-C comment] [-f keyfile]
     ...
```
在这些选项中， 常用的有: 
### 2.2.1 -C
```  bash
$ ssh-keygen -C "your_email@domain.com"
```
公钥添加注释`your_email@domain.com`的注释

## 3上传公钥
上传公钥是用于后期的自动远程登录用的。
``` bash
$ ssh-copy-id username@host
```
根据提示输入远程主机名,账户和密码,然后本地的`is_ras.pub`就会上传到对方的`~/.ssh/authorized_keys`中。
这样输入`ssh username@host`就自动登录到远程主机上，其原理是从本地用私钥加密个数字，然后远程主机则用已经上传过去的公钥解密，如果能解开则远程主机允许本次登录，双方基于非对称加密交换数据。
## 

## 4 `~/.ssh/config`的使用
`~/.ssh/config`在`ssh`连接远程主机的会话中起到了默认配置的作用。利用好它能提高些 itt
## 4.1 别名使用
另名能不用记住账号和主机名，通过别名主能登录了, 如把以下配置加入到`~/.ssh/config`
``` bash 
Host             alias
User             username
Hostname         ip
IdentityFile    ~/.ssh/id_rsa
Port            22
```
然后:
``` bash
$ ssh alias
```
就可以登录了
